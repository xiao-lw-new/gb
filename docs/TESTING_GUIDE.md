# 奖励测试指南（面向业务/运营测试）

本指南给“随机挑选的测试用户/业务测试人员”使用：**不涉及技术实现与命令行**，只说明如何 **排线（建立上下级关系）**、以及如何在管理端核对 **静态收益 / 推荐奖 / VIP 奖励 / 配额** 等数据是否正确生成。

> 重要说明：当前管理端主要用于“查询/审计”，**通常无法直接在页面里修改用户的上级关系（p_id）或激活状态**。因此“排线/激活/触发发放”等动作，需要技术同学先把数据准备好；你只负责按本手册核对结果。

---

## 1. 测试前准备（你需要拿到的东西）

- **管理端地址与账号**：向负责人获取（示例账号：`admin@mcnext.io / password`）
- **测试日期**：本次测试要核对哪一天的奖励（例如 `2026-01-14`）
- **测试用户清单**（至少 6～10 个更好）：
  - 用户ID 或 钱包地址（地址更直观）
  - 每个用户是否需要“激活”
  - 每个用户的“上级”（用于排线）
- **测试动作清单**（由业务/产品定义）：
  - 谁质押（7天/15天）、质押量/次数、发生时间范围
  - 是否需要跑“推荐奖”“VIP 奖励”场景

---

## 2. 如何排线（建立上下级关系）

### 2.1 排线的交付方式（推荐）

请用表格提交给技术同学导入/设置，字段建议如下：

- **用户A（下级）**：用户ID / 钱包地址
- **用户B（上级）**：用户ID / 钱包地址（写空表示无上级/根节点）
- **说明**：例如“直推/二代/用于 VIP 大区/小区测试”

### 2.2 排线完成后的核对方法（管理端）

在管理端进入：

- **用户中心 → 用户管理**

逐个核对：

- **钱包地址** 是否匹配
- **上级ID（p_id）** 是否等于你表格里指定的上级
- **激活状态（active）** 是否符合测试要求

> 若发现上级关系不对：先不要继续测奖励，先让技术修正排线，否则推荐奖/VIP 业绩都会偏差。

---

## 3. 质押相关核对（奖励计算前的必检项）

管理端进入：

- **质押体系 → 质押汇总**
- **质押体系 → 质押流水**

### 3.1 质押汇总（确认“有资格产生静态收益”）

核对点：

- 用户是否存在质押记录
- 类型是否正确（7天 / 15天）
- “质押U价值”“代币数量”是否与预期一致
- “最后变动时间”是否在本次测试时间范围内

### 3.2 质押流水（确认“质押变动发生过”）

核对点：

- 流水是否有新增
- 变动额正负是否合理（增加/减少）
- 交易哈希是否存在（如有链上交易）

---

## 4. 静态收益测试（个人静态）

管理端进入：

- **收益审计 → 静态收益记录**

核对步骤：

1. 用筛选器选择 **收益日期范围**（至少覆盖测试日期）
2. 搜索目标 **用户ID**
3. 核对该用户当日是否产生记录：
   - 7天收益/15天收益是否与其质押类型匹配（不匹配的那一列一般应为 0 或空）
   - **预计发放(U)** 是否大于 0（有质押且当日应产出时）
   - **实际发放(U)**：
     - 若本次测试包含“真实发放”，则应大于 0
     - 若本次测试仅对账/预计算，则可能为 0（以项目实际流程为准）

验收标准（不纠结公式版）：

- **有质押 → 有静态收益记录**
- **无质押 → 静态收益记录为 0 或不出现**
- 同一用户同一日期不应出现多条重复记录（异常需反馈）

---

## 5. 推荐奖测试（直推/多代）

管理端进入：

- **收益审计 → 推荐奖明细**
- **收益审计 → 推荐奖汇总**

### 5.1 推荐奖明细（看“为什么会得奖”）

核对步骤：

1. 选择测试日期
2. 以“来源用户ID”（下级）或“获利用户ID”（上级）搜索
3. 核对是否出现明细行：
   - **代数** 是否符合排线（直推=1代、上上级=2代…）
   - **比例** 是否存在（不要求你验证比例公式，只要不异常为 0/空）
   - **奖励金额(U)** 是否大于 0（当下级当日产生了可分配收益时）

### 5.2 推荐奖汇总（看“最终拿到多少”）

核对点：

- 获利用户在该日期是否有汇总记录
- **预计应得(U)** 与明细合计是否大致一致
- **实际获得(U)** 是否符合本次测试是否包含“真实发放”

验收标准（场景化）：

- “下级有静态收益/可分配收益”时，上级应能在当日看到推荐奖（明细/汇总至少其一出现，最终以汇总为准）
- 排线改变会影响代数与获利人，必须以排线核对为先

---

## 6. VIP 奖励测试（VIP 极差 / VIP 汇总）

管理端进入：

- **用户中心 → VIP等级管理**
- **用户中心 → VIP业绩看板**
- **收益审计 → VIP极差明细**
- **收益审计 → VIP奖励汇总**

核对流程：

1. **先核对 VIP 等级**：目标 VIP 用户是否在 `VIP等级管理` 中显示为正确等级
2. **再核对 VIP 业绩**：在 `VIP业绩看板` 中，目标 VIP 的个人/团队业绩、直推/团队激活是否符合排线与用户动作
3. **最后核对奖励**：
   - `VIP极差明细`：确认“来源用户 → 获利 VIP”链路存在、日期正确、金额不异常
   - `VIP奖励汇总`：确认目标 VIP 在当日的预计/实际奖励

验收标准（不纠结公式版）：

- VIP 有团队业绩/链路成立 → 当日应能看到 VIP 相关明细与/或汇总
- VIP 汇总金额应与明细金额“方向一致”（不应出现汇总为 0 但明细大量为正的情况）

---

## 7. 配额测试（额度与流水）

管理端进入：

- **收益配额 → 收益额度**
- **收益配额 → 配额流水**

核对点：

- 有购买/扣除动作 → 应有对应流水
- 流水里“变动前/变动额/变动后”数值自洽（前 + 变动 = 后）
- 若奖励发放会影响配额（以项目规则为准），则发放日配额应发生相应变化

---

## 8. 一键验收清单（建议每次测试都勾选）

- **排线**：`用户管理` 中 p_id 全部正确
- **激活**：active 状态符合场景
- **质押**：`质押汇总/流水` 有记录且类型正确
- **静态收益**：`静态收益记录` 当日有记录（应有的用户都有）
- **推荐奖**：`推荐奖明细/汇总` 链路与代数正确、金额不异常
- **VIP**：等级/业绩/奖励（明细+汇总）链路一致
- **配额**：额度与流水自洽

---

## 9. 常见问题（业务侧如何处理）

- **看不到当日收益记录**
  - 先确认：质押是否存在、日期筛选是否正确、用户ID是否选对
  - 再确认：本次是否已跑完“当日奖励计算/发放流程”（需要技术确认）

- **推荐奖/VIP 金额为 0 或没有明细**
  - 90% 是排线/激活/业绩数据不满足条件：先回到第 2 节核对排线与激活

- **“预计有、实际没有”**
  - 可能是本次流程只做了对账未做真实发放；请向技术确认本次流程类型与执行时间

